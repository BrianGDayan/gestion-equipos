datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Equipo {
  codigo           String  @id @db.VarChar(10) 
  nombre_equipo    String  @db.VarChar(100)
  ubicacion_actual String? @db.VarChar(50)
  tipo_codigo      String  @db.VarChar(10)

  tipo             Tipo    @relation(fields: [tipo_codigo], references: [codigo])
  historial        TrazabilidadUbicacion[]
}

model Tipo {
  codigo     String   @id @db.VarChar(10)
  referencia String   @unique @db.VarChar(50)
  
  equipos    Equipo[] 
}

model TrazabilidadUbicacion {
  id             Int      @id @default(autoincrement())
  ubicacion      String   @db.VarChar(255)
  fecha_registro DateTime @default(now()) @db.Timestamptz(6)
  
  equipo_codigo  String   @db.VarChar(10)
  equipo         Equipo   @relation(fields: [equipo_codigo], references: [codigo], onDelete: Cascade)

  @@index([equipo_codigo])
}